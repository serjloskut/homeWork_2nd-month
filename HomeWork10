using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;

namespace HomeWork1
{
    class Program
    {
        static void Main(string[] args)
        {
            Warrior[] warriors =
            {
                new FigtherClanHead(100, 30, 40),
                new FigtherClanBoxer(90, 30, 30),
                new FigtherClanShoulder(200, 20, 15),
                new FigtherClanHead(150, 20, 40),
                new FigtherClanBoxer(150, 150, 30)
            };

            Random random = new Random();

            Console.WriteLine("Доступные бойцы:");
            for (int i = 0; i < warriors.Length; i++)
            {
                Console.Write($"{i + 1} - ");
                warriors[i].PrintStats();
            }

            Console.Write("Выберите первого игрока: ");
            Warrior figterOne = warriors[(TryParseNumber() - 1)];

            Console.Write("Выберите Второго игрока: ");
            Warrior figterTwo = warriors[TryParseNumber() - 1];

            while (figterOne.GetHealth()>0 && figterTwo.GetHealth()>0)
            {
                figterOne.TakeDamage(figterTwo.GetDamage());
                figterOne.UseSpecialSkill(random.Next(50,150));
                figterTwo.TakeDamage(figterOne.GetDamage());
                figterTwo.UseSpecialSkill(random.Next(50, 150));

                figterOne.PrintStats();
                figterTwo.PrintStats();
                Console.WriteLine();
            }

            if (figterOne.GetHealth() <= 0 && figterTwo.GetHealth() <= 0)
                Console.WriteLine("Бой закончился ничьей!");
            else if(figterOne.GetHealth()<=0)
                Console.WriteLine("Победил второй игрок!");
            else if(figterTwo.GetHealth() <= 0)
                Console.WriteLine("Победил первый игрок!");

            Console.ReadKey();
        }

        static int TryParseNumber()
        {
            int resultParse;

            while (!int.TryParse(Console.ReadLine(), out resultParse))
            {
                Console.Write("Неверный выбор! Повпробуйте ввести еще раз: ");
            }

            return resultParse;
        }
    }

    class Warrior
    {
        protected int Health;
        protected int Armor;
        protected int Damage;

        protected string TypeClan;

        public Warrior(int health, int armor, int damage)
        {
            Health = health;
            Armor = armor;
            Damage = damage;
        }

        public int GetHealth()
        {
            return Health;
        }

        public int GetDamage()
        {
            return Damage;
        }

        public void TakeDamage(int damage)
        {
            if (Armor <= damage)
                Health -= (damage - Armor);
        }

        public void PrintStats()
        {
            Console.WriteLine($"Healh - {Health}; Armor - {Armor}; Damage - {Damage}");
        }

        public string GetTypeClan()
        {
            return TypeClan;
        }

        public virtual void UseSpecialSkill(int random)
        {
            
        }
    }

    class FigtherClanHead : Warrior
    {
        public FigtherClanHead(int health, int armor, int damage) : base(health, armor, damage)
        {
            TypeClan = "Боец клана \"Головастых\"";
        }

        public override void UseSpecialSkill(int random)
        {
            Health += (random/80);
        }
    }

    class FigtherClanShoulder : Warrior
    {
        public FigtherClanShoulder(int health, int armor, int damage) : base(health, armor, damage)
        {
            TypeClan = "Боец клана \"Волосатых\"";
        }

        public override void UseSpecialSkill(int random)
        {
            Health += (random/7);
            Armor -= (random/15);
        }
    }

    class FigtherClanBoxer : Warrior
    {
        public FigtherClanBoxer(int health, int armor, int damage) : base(health, armor, damage)
        {
            TypeClan = "Боец клана \"Боксеры\"";
        }

        public override void UseSpecialSkill(int random)
        {
            Damage += (Damage / (random/10));
        }
    }
}
