using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;

namespace HomeWork1
{
    class Program
    {
        static void Main(string[] args)
        {
            Random random = new Random();
            Zoo zoo = new Zoo(random);
            zoo.ToWork();
        }
    }

    class Zoo
    {
        private List<Aviary> _aviaries;
        private Random _random;

        public Zoo(Random random)
        {
            _aviaries = new List<Aviary>();
            _random = random;
            int aviaryCount = random.Next(4, 30);

            for (int i = 0; i < aviaryCount; i++)
            {
                AddAviary();
            }
        }

        private void AddAviary()
        {
            _aviaries.Add(new Aviary(_random));
        }

        public void ToWork()
        {
            while (true)
            {
                int number = _aviaries.Count + 1;

                while (number > _aviaries.Count - 1)
                {
                    Console.WriteLine("Выберите, к какому вольеру вы хотите подойти.");

                    for (int i = 0; i < _aviaries.Count; i++)
                    {
                        Console.WriteLine("Вольер №" + i);
                    }

                    number = TryParseNumber();

                    if (number > _aviaries.Count - 1)
                    {
                        Console.WriteLine("Вольер с таким номером не существует..\n");
                    }
                }

                Console.Clear();
                Console.WriteLine($"Вы подошли к вольеру №{number}\n");
                _aviaries[number].ShowInfo();
                Console.WriteLine("Нажмите любую клавишу чтобы вернуться к выбору вольеров...");
                Console.ReadKey();
                Console.Clear();
            }
        }

        private int TryParseNumber()
        {
            int resultParse;

            while (int.TryParse(Console.ReadLine(), out resultParse) == false)
            {
                Console.Write("Необходимо ввести число! Повпробуйте ввести еще раз: ");
            }

            return resultParse;
        }
    }

    class Aviary
    {
        private List<Animal> _animals;
        private Random _random;
        private string[,] _animalsSound =
        {
            {"Кошка","Мяу"},
            {"Собака", "Гав"},
            {"Корова", "Му"},
            {"Лошадь", "Иго-го"},
            {"Петух", "Кукареку"},
            {"Свинья", "Хрю"}
        };

        public Aviary(Random random)
        {
            _animals = new List<Animal>();
            _random = random;
            AddAnimals();
        }

        public void ShowInfo()
        {
            Console.WriteLine($"Информация о вольере:\n" +
                $"Животные: {_animals[0].Name}\n" +
                $"Количество: {_animals.Count}\n" +
                $"Пол: {_animals[0].Sex}\n" +
                $"Издает звук: {_animals[0].Sound}\n");
        }

        private void AddAnimals()
        {
            int random = _random.Next(0,_animalsSound.GetLength(0)-1);
            int countAnimal = _random.Next(70, 100);
            int randomSex = _random.Next(1, 2);
            string sex;

            if (randomSex == 1)
                sex = "Мужской";
            else
                sex = "Женский";

            for (int i = 0; i < countAnimal; i++)
                _animals.Add(new Animal(_animalsSound[random, 0],sex, _animalsSound[random, 1]));
        }
    }

    class Animal
    {
        public string Name { get; private set; }
        public string Sex { get; private set; }
        public string Sound { get; private set; }

        public Animal(string name, string sex, string sound)
        {
            Name = name;
            Sound = sound;
            Sex = sex;
        }
    }
}
