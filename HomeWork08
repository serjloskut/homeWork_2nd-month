using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;

namespace HomeWork1
{
    class Program
    {
        static void Main(string[] args)
        {
            User user = new User();
            Seller seller = new Seller();
            Product[] productsForAccept = { new Product("Огурец"), new Product("Помидор"), new Product("Укроп"), new Product("Майонез") };

            bool isContinue = true;

            seller.AcceptProduct(productsForAccept);

            while (isContinue)
            {
                Console.SetCursorPosition(0, 15);
                Console.WriteLine("Товары в наличии:");
                PrintProducts(seller.Products);

                Console.SetCursorPosition(0, 0);
                Console.WriteLine("Доступные действие:\n" +
                    "1. Купить товар.\n" +
                    "2. Показать свою корзину.\n" +
                    "3. Выйти из магазина.\n");
                Console.Write("Введите номер действия: ");

                switch (Console.ReadLine())
                {
                    case "1":
                        Console.Write("\nВведите название продукта: ");

                        user.BuyProduct(new Product(Console.ReadLine()), seller);
                        break;
                    case "2":
                        Console.WriteLine("\nВ Вашей корзине лежат следующие продукты:");

                        PrintProducts(user.Products);

                        Console.Write("Нажмите любую клавишу для продолжения...");
                        Console.ReadKey();
                        break;
                    case "3":
                        isContinue = false;
                        break;
                    default:
                        Console.Write("Команда не распознана. Нажмите любую клавишу для повторного выбора...");
                        Console.ReadKey();
                        break;
                }
                Console.Clear();
            }
        }

        static void PrintProducts(List<Product> products)
        {
            foreach (var product in products)
            {
                Console.WriteLine(product.Name);
            }
        }
    }

    class Product
    {
        public string Name { get; private set; }

        public Product(string name)
        {
            Name = name;
        }
    }

    class User
    {
        public List<Product> Products { get; private set; }

        public User()
        {
            Products = new List<Product>();
        }

        public void BuyProduct(Product product, Seller seller)
        {
            if (seller.CheckProduct(product))
            {
                Products.Add(product);
                seller.SellProduct(product);
                Console.WriteLine("Вы приобрели продукт.\nНажмите любую клавишу для продолжения...");
                Console.ReadKey();
            }
            else
            {
                Console.WriteLine("У продавца такой товар отсутствует. Покупка не удалась.\nНажмите любую клавишу для продолжения...");
                Console.ReadKey();
            }
        }
    }

    class Seller
    {
        public List<Product> Products { get; private set; }

        public Seller()
        {
            Products = new List<Product>();
        }

        public void AcceptProduct(Product[] products)
        {
            for (int i = 0; i < products.Length; i++)
                Products.Add(products[i]);
        }

        public bool CheckProduct(Product checkProduct)
        {
            bool isCheck = false;

            foreach (var product in Products)
            {
                if (product.Name == checkProduct.Name)
                    isCheck = true;
            }

            return isCheck;
        }

        public void SellProduct(Product sellProduct)
        {
            for (int i = 0; i < Products.Count; i++)
            {
                if (Products[i].Name == sellProduct.Name)
                    Products.Remove(Products[i]);
            }
        }
    }
}
